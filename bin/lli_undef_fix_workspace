#!/bin/sh
# set up a workspace for working on this project
#
# Note: This is heavily customized for Christian Schreiner's home directory
# organization.  Other users will probably want to modify this to their
# tastes.

scriptname=lli_undef_fix_workspace

# ==========================================================================
# read command line args
arg_shell=false
need_to_exit=false
while [ $# -ge 1 ]; do
   case $1 in
      --shell)
         arg_shell=true
         shift
         ;;
      *)
         echo ${scriptname}: do not recognize option \"$1\"
         need_to_exit=true
         shift
   esac
done

if [ "$need_to_exit" = "true" ]; then
   echo ${scriptname}: too many errors, exiting.
   exit 255
fi


# ==========================================================================
# set up environment
export PROJ_ROOT=$EDUUUT/lli_undef_fix3
if [ ! -d $PROJ_ROOT ]; then
   echo ${scriptname}: can not find project directory.
   echo "  " dir=\"$PROJ_ROOT\".
   exit 255
fi

if [ ! -d $PROJ_ROOT/live/bin ]; then
   echo ${scriptname}: can not find llvm live binary directory.
   echo "  " dir=\"$PROJ_ROOT/live/bin\".
   exit 255
fi
export PATH=$PROJ_ROOT/live/bin:$PROJ_ROOT/admin/bin:$PATH

cd $PROJ_ROOT/git


# ==========================================================================
# create the workspace or equivalent

if [ "$arg_shell" = "true" ]; then
   exec bash 
fi

# start a bunch of xwindows
workspace soft

# ==========================================================================
# extra windows customized for this project

# these are currently customized for dyson, rethink them for other hosts.
left_monitor_width=1920
left_monitor_height=1200
right_monitor_width=1680
right_monitor_height=1050

xterm -sb -title "vmstat xterm" -geometry 82x25+$left_monitor_width-0 \
      -e "vmstat -SM 5" &

(cd $PROJ_ROOT/admin; \
      xterm -sb -fn 8x13 -title "admin xterm" \
	 -geometry 80x60+$left_monitor_width+0 & )

# TODO2: add something here for the web browser window
firefox http://www.llvm.org/docs/GettingStarted.html \
      http://llvm.org/docs/LangRef.html \
      &

# ==========================================================================
# end of script

